(()=>{let n=$(window).height(),a=null,o=!1,i=!1;let s=[],r=null;function e(){var e=f(document.querySelector("#game-mode-canvas"));if(e&&!i){i=!0;let e=new Image,t=(e.src="./zip/img/monster_00000000.jpg",document.querySelector("#game-mode-canvas")),n=t.getContext("2d");e.onload=function(){n.drawImage(e,0,0,t.width,t.height),s[0]=e},!function(){for(let n=0;n<145;n+=2){let e=new Image,t=n.toString();1===t.length?t="00"+t:2===t.length&&(t="0"+t),e.src=`./zip/img/monster_00000${t}.jpg`,e.onload=function(e,t){s[e]=t}(n,e)}}()}}m(),l(),u(),g(),c(),t(),e(),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,100)},$(window).resize(function(){n=$(window).height(),m()});const d=(n,a,i=0)=>{if(i<=145&&o){var e=s[i];n.drawImage(e,0,0,a.width,a.height),i+=2,requestAnimationFrame(()=>{d(n,a,i)})}else if(145<i&&o){i=145;let e=new Image,t=i.toString();1===t.length?t="00"+t:2===t.length&&(t="0"+t),e.src=`./zip/img/monster_00000${t}.jpg`,n.drawImage(e,0,0,a.width,a.height)}};function t(){var e=document.querySelector("#game-mode-canvas"),t=p(e),e=h(e);if(t&&!$("#game-mode-canvas").hasClass("playing")){$("#game-mode-canvas").addClass("playing"),o=!0;{let e=document.querySelector("#game-mode-canvas"),t=e.getContext("2d");clearTimeout(a),a=setTimeout(()=>{o=!0,d(t,e,0)},500)}}else if(!e&&$("#game-mode-canvas").hasClass("playing")){$("#game-mode-canvas").removeClass("playing"),o=!1;{let e=document.querySelector("#game-mode-canvas"),t=e.getContext("2d"),n=new Image;n.src="./zip/img/monster_00000000.jpg",t.drawImage(n,0,0,e.width,e.height)}}}function m(){var e=$(window).width();e<1e3?(e=e/750,$("[transform]").css({transform:`scale(${e})`})):$("[transform]").css({transform:"none"})}function c(){$(".image-lazy").each(function(){f(this)&&$(this).removeClass("image-lazy")})}function u(){$("[fade-in]").each(function(){var e=h(this);e&&!$(this).hasClass("faded")?$(this).addClass("faded"):!e&&$(this).hasClass("faded")&&$(this).removeClass("faded")})}function l(){$("[fade-in-mid]").each(function(){var e=p(this),t=h(this);e&&!$(this).hasClass("faded")?$(this).addClass("faded"):!t&&$(this).hasClass("faded")&&$(this).removeClass("faded")})}function g(){$(".performance-box").each(function(){var e=p(this),t=h(this);e&&!$(this).hasClass("faded")?(clearTimeout(r),r=setTimeout(()=>{$(this).addClass("faded");{let e={cpu:"0%",gpu:"0%"};return void anime({targets:e,cpu:"40%",gpu:"40%",round:1,duration:500,easing:"linear",update:function(){$(".cpu-perform-percent").html(e.cpu),$(".gpu-perform-percent").html(e.gpu)},complete:function(){$(".performance-box").addClass("finished")}})}},200)):!t&&$(this).hasClass("faded")&&($(this).removeClass("faded"),$(".performance-box").removeClass("finished"),$(".cpu-perform-percent").html("0"),$(".gpu-perform-percent").html("0"))})}function h(e){return!!e.getBoundingClientRect&&e.getBoundingClientRect().top<n}function f(e){return!!e.getBoundingClientRect&&e.getBoundingClientRect().top<2*n}function p(e){if(!e.getBoundingClientRect)return!1;var t=e.getBoundingClientRect(),e=$(e).height();return t.top+e/2<n}let w=function(e,t){let n=!0,a=null;return function(){if(clearTimeout(a),!n)return!1;n=!1,setTimeout(()=>{e(),n=!0},t),a=setTimeout(()=>{e()},t)}}(()=>{l(),u(),g(),c(),t(),e()},300);$(window).scroll(function(){w()})})();